<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Danmark valgsteder</title>
  <script type="text/javascript" src="d3.js"></script>
  <style type="text/css">
    #detaljer {
      vertical-align: top;
      width: 200px;
      height: 200px;
      border-style: solid;
      border-color: grey;
      border-width: 1px;
      padding: 1em;
    }

    * {
      box-sizing: border-box;
    }

    .column {
      float: right;
      padding: 10px;
    }

    .row:after {
      content: "";
      display: table;
      clear: both;
    }
  </style>
</head>

<body>
  <h1>test</h1>

  <div class="row">
    <div class="column">
      <span id="aarhus"></span>
    </div>
    <div class="column">
      <div id="detaljer">
      </div>
    </div>
  </div>

  <script type="text/javascript">



    // Hent GeoJSON
    d3.json("./data/denmark-map.json").then(function (json) {
      console.log(json);

      // Width og height
      const w = 1200;
      const h = 400;

      // Lav en mercator projection, fit ind i w og h
      const projection = d3.geoMercator().fitSize([w, h], json);

      // Lav en path ud fra projektion
      const path = d3.geoPath(projection);

      // Lav SVG element
      const svg = d3.select("body")
        .append("svg")
        .attr("width", w)
        .attr("height", h)
    


    

      // Tegn path med SVG. Path-data sættes på 'd'-attribut.
      svg.selectAll("path")
        .data(json.features)
        .enter()
        .append("path")
        .attr("d", path)
        .attr("stroke", function (d) {
          return "#3d2706";
        })
        .attr("fill", function (d) {
          return "green";
        });

 

      // Lav punkter for alle legepladser i Aarhus
      d3.json("./data/valg.json").then(function (json) {
        svg.selectAll("path")
          .data(json.features)
          .enter()
          .append("path")
          .attr("d", path)
          .attr("stroke", function (d) {
            return "black";
          })
          .attr("fill", function (d) {
            return "green";
          })

          .on("mouseover", function (e, d) {
            const { AfstemKod, AfstemNav, KommuneNum } = d.properties;
            const text = `${AfstemKod}. ${AfstemNav}\n${KommuneNum}`
            d3.select("#detaljer").text(text);
          });
      });
    });
  </script>
</body>

</html>